# Frame Zero - 产品需求文档 (PRD)

## 1. 项目概述

### 1.1 项目愿景

打造一个以VSCode风格为UI设计灵感的开源计算机学习社区，为编程学习者提供打卡记录、学习资源分享、就业经验交流和技术博客发布的一站式平台。

### 1.2 目标用户群体

- **计算机专业学生**: 需要记录学习历程、分享学习笔记
- **编程初学者**: 寻求学习资源、获取就业指导
- **资深开发者**: 分享技术经验、建立个人品牌
- **求职者**: 了解行业动态、分享面试经验

### 1.3 核心价值主张

1. **VSCode风格UI**: 熟悉的开发者界面，降低学习成本
2. **多板块内容**: 覆盖学习全周期（打卡→学习→就业→分享）
3. **三级权限体系**: 清晰的角色分工，便于社区管理
4. **开源项目**: 透明可追溯，社区共同建设

---

## 2. 用户角色定义

### 2.1 创始人 (FOUNDER)

**权限范围:**
- 系统最高权限，可执行所有操作
- 管理所有用户（封禁、解封、删除）
- 修改系统配置和功能开关
- 管理板块和内容分类
- 访问系统统计和审计日志
- 任命或撤销管理员

**主要职责:**
- 制定社区发展方向
- 处理重大争议和纠纷
- 维护社区健康运行

**UI标识:** 底部状态栏显示 `👑 创始人`

### 2.2 管理员 (ADMIN)

**权限范围:**
- 审核和删除违规内容
- 管理板块（置顶、锁定、移动帖子）
- 查看用户列表和基本信息
- 查看社区统计数据
- 无法修改系统设置
- 无法管理其他管理员

**主要职责:**
- 日常内容审核
- 维护板块秩序
- 协助用户解决问题

**UI标识:** 底部状态栏显示 `⭐ 管理员`

### 2.3 用户 (USER)

**权限范围:**
- 创建和编辑自己的帖子
- 删除自己的帖子和评论
- 点赞和评论他人内容
- 每日学习打卡
- 查看公开内容
- 无法删除他人内容
- 无法访问管理后台

**主要职责:**
- 积极参与社区互动
- 遵守社区规范
- 分享有价值的内容

**UI标识:** 底部状态栏显示 `👤 用户` 或仅显示用户名

---

## 3. 功能需求

### 3.1 用户认证模块

#### 3.1.1 用户注册
- **输入字段:**
  - 邮箱地址（作为唯一标识）
  - 用户名（唯一，3-20字符）
  - 密码（8位以上，包含字母和数字）
- **验证流程:**
  - 前端实时验证格式
  - 后端检查邮箱/用户名唯一性
  - 发送验证邮件（可选功能）
- **成功后:**
  - 自动登录
  - 创建默认用户资料
  - 欢迎引导

#### 3.1.2 用户登录
- **登录方式:** 邮箱 + 密码
- **记住我功能:** 7天免登录
- **Token机制:**
  - Access Token: 15分钟有效期
  - Refresh Token: 7天有效期
- **登录后:**
  - 跳转到首页
  - 状态栏显示用户信息

#### 3.1.3 密码重置
- **流程:**
  1. 用户输入注册邮箱
  2. 系统发送重置链接
  3. 用户点击链接设置新密码
- **安全措施:**
  - 重置链接30分钟有效
  - 使用后立即失效

#### 3.1.4 个人资料管理
- **可编辑字段:**
  - 用户名
  - 头像（支持上传，最大2MB）
  - 个人简介（最多500字）
  - 个人网站链接
- **只读字段:**
  - 邮箱
  - 注册时间
  - 角色等级

#### 3.1.5 头像上传
- **支持格式:** JPG, PNG, GIF, WebP
- **文件大小:** 最大2MB
- **图片处理:**
  - 自动裁剪为正方形
  - 生成三种尺寸: 64x64, 128x128, 256x256
- **存储:** 本地文件系统或云存储

---

### 3.2 打卡板块

#### 3.2.1 每日学习打卡
- **打卡内容:**
  - 学习内容描述（必填，最多200字）
  - 学习时长（小时为单位，可精确到0.5小时）
  - 学习标签（最多5个，如"Python", "算法", "React"）
- **打卡限制:**
  - 每用户每天只能打卡一次
  - 打卡时间以当天23:59:59为截止
- **打卡后显示:**
  - 连续打卡天数
  - 累计打卡天数
  - 今日排名（在排行榜中）

#### 3.2.2 学习时长记录
- **统计维度:**
  - 今日学习时长
  - 本周学习时长
  - 本月学习时长
  - 累计学习时长
- **图表展示:**
  - 最近7天趋势图
  - 每月总时长柱状图
  - 学习热力图（GitHub风格）

#### 3.2.3 学习内容标签
- **标签功能:**
  - 方便统计各技术栈学习时间
  - 快速查看相关打卡记录
  - 生成个人技术栈云图
- **常用标签预设:**
  - 编程语言: Python, JavaScript, Java, C++, Go
  - 框架: React, Vue, Spring, Django
  - 计算机基础: 数据结构, 算法, 网络, 操作系统
  - 其他: 数据库, DevOps, AI/ML

#### 3.2.4 连续打卡统计
- **连续打卡定义:**
  - 从第一次打卡开始计算
  - 中断一天后重新计数
- **激励机制:**
  - 连续7天: 获得青铜徽章
  - 连续30天: 获得白银徽章
  - 连续100天: 获得黄金徽章
  - 连续365天: 获得钻石徽章

#### 3.2.5 打卡日历视图
- **展示方式:**
  - 类似GitHub贡献图
  - 颜色深浅表示学习时长
  - 点击日期查看打卡详情
- **时间范围:**
  - 最近一年
  - 可按年份查看

#### 3.2.6 打卡排行榜
- **排名维度:**
  - 连续打卡天数（默认）
  - 累计打卡天数
  - 本周学习时长
  - 本月学习时长
- **展示内容:**
  - 前100名用户
  - 用户名、头像
  - 排名数字值
- **更新频率:** 实时更新

---

### 3.3 学习板块

#### 3.3.1 发布学习资源
- **资源类型:**
  - 教程链接
  - 视频课程
  - 电子书籍
  - 实战项目
- **发布表单:**
  - 资源标题
  - 资源描述
  - 资源链接
  - 难度等级（入门/中级/高级）
  - 相关标签
- **资源来源标注:**
  - 原创/转载
  - 转载需注明来源

#### 3.3.2 分享学习笔记
- **编辑器功能:**
  - Markdown实时预览
  - 代码块语法高亮
  - 图片上传（粘贴或拖拽）
  - 数学公式支持（KaTeX）
- **笔记分类:**
  - 按技术栈分类
  - 按难度分类
  - 自定义标签

#### 3.3.3 资源分类浏览
- **分类方式:**
  - 按板块（前端/后端/移动端/AI等）
  - 按难度（入门/中级/高级）
  - 按标签
  - 按热度（点赞数/评论数/浏览数）
- **排序方式:**
  - 最新发布
  - 最多点赞
  - 最多评论
  - 最多浏览

#### 3.3.4 资源评分与评论
- **评分系统:**
  - 5星评分制
  - 显示平均分
  - 显示评分人数
- **评论功能:**
  - 支持富文本回复
  - 支持@提醒作者
  - 评论点赞
  - 评论排序（热门/最新）

---

### 3.4 就业分享板块

#### 3.4.1 面试经验分享
- **内容模板:**
  - 目标岗位和公司
  - 面试轮次
  - 技术面试题
  - HR面试问题
  - 面试结果
  - 复盘总结
- **隐私保护:**
  - 可选择匿名发布
  - 可隐藏公司名称

#### 3.4.2 求职过程记录
- **记录内容:**
  - 投递公司列表
  - 面试进度跟踪
  - Offer情况
  - 最终选择
- **时间线展示:**
  - 按时间顺序展示
  - 标注关键节点

#### 3.4.3 薪资信息分享
- **信息字段:**
  - 城市
  - 工作年限
  - 学历
  - 公司类型（大厂/独角兽/创业公司）
  - 薪资范围（月薪/年薪）
  - 福利待遇
- **隐私措施:**
  - 必须匿名发布
  - 薪资以区间形式展示（如20-30K）
  - 不展示具体公司名称

#### 3.4.4 公司评价
- **评价维度:**
  - 工作氛围
  - 技术栈
  - 加班情况
  - 薪资福利
  - 发展前景
  - 推荐指数（1-5星）
- **评价规范:**
  - 客观真实
  - 不涉及公司机密
  - 不人身攻击

#### 3.4.5 简历优化建议
- **内容形式:**
  - 简历模板分享
  - 简历修改建议
  - 面试技巧
  - 职业规划指导
- **互动方式:**
  - 可请求他人帮忙修改简历
  - 需脱敏处理个人信息

---

### 3.5 博客板块

#### 3.5.1 发布技术博客
- **博客类型:**
  - 原创技术文章
  - 翻译国外文章
  - 项目实战总结
  - 源码分析
- **编辑功能:**
  - Monaco Editor（VSCode编辑器核心）
  - Markdown语法支持
  - 实时预览
  - 代码高亮（多种主题）
  - 图片插入和管理

#### 3.5.2 Markdown编辑器
- **核心功能:**
  - 语法高亮
  - 快捷键支持
  - 自动补全
  - 多光标编辑
  - 查找替换
- **增强功能:**
  - Emoji表情插入
  - 表格编辑器
  - 脚注和引用
  - 任务列表

#### 3.5.3 代码高亮显示
- **支持语言:**
  - JavaScript, TypeScript, Python, Java, C++
  - Go, Rust, PHP, Ruby
  - SQL, CSS, HTML, Shell
  - 等100+种语言
- **主题选择:**
  - VSCode Dark+（默认）
  - Monokai
  - Solarized
  - GitHub Light/Dark

#### 3.5.4 文章分类/标签
- **分类体系:**
  - 一级分类: 前端/后端/移动端/运维/AI等
  - 二级分类: 具体技术栈
- **标签功能:**
  - 自定义标签
  - 标签推荐
  - 热门标签展示
  - 标签订阅

#### 3.5.5 文章搜索
- **搜索范围:**
  - 标题
  - 内容
  - 标签
  - 作者
- **搜索功能:**
  - 关键词高亮
  - 搜索历史
  - 热门搜索
  - 搜索结果排序（相关度/时间）

---

### 3.6 通知系统

#### 3.6.1 实时通知推送
- **通知类型:**
  - 评论通知: 有人评论你的帖子
  - 回复通知: 有人回复你的评论
  - 点赞通知: 有人点赞你的内容
  - @提醒通知: 有人在评论中@你
  - 系统通知: 官方公告
- **推送方式:**
  - 浏览器通知（需授权）
  - 应用内红点提示
  - 邮件通知（可选）

#### 3.6.2 通知中心
- **功能:**
  - 查看所有通知
  - 标记已读/未读
  - 批量操作（全部已读、删除）
  - 通知分组（按类型/时间）
- **展示方式:**
  - 最新通知在最前
  - 未读通知高亮
  - 可直接跳转到相关内容

#### 3.6.3 邮件通知（可选）
- **设置项:**
  - 是否开启邮件通知
  - 接收频率（实时/每日汇总/每周汇总）
  - 通知类型选择
- **邮件内容:**
  - 通知摘要
  - 快速跳转链接
  - 取消订阅链接

#### 3.6.4 通知偏好设置
- **个性化选项:**
  - 选择接收的通知类型
  - 设置免打扰时段
  - 选择@提醒的权限（所有人/仅关注的人）
- **默认设置:**
  - 开启所有通知
  - 免打扰时段: 23:00-8:00

---

## 4. UI/UX需求

### 4.1 VSCode Dark+主题风格

#### 4.1.1 布局结构
- **顶部标题栏:**
  - 显示项目名称
  - 菜单按钮
  - 窗口控制按钮（最小化/最大化/关闭）
- **左侧活动栏:**
  - 固定宽度: 48px
  - 垂直排列图标
  - 高亮当前激活项
- **侧边栏:**
  - 固定宽度: 256px
  - 显示板块列表
  - 支持折叠/展开
- **主编辑区:**
  - 自适应宽度
  - 标签页栏
  - 内容展示区
- **底部状态栏:**
  - 固定高度: 24px
  - 蓝色背景 (#007acc)
  - 显示用户信息和系统状态

#### 4.1.2 颜色规范
```css
/* 主色调 */
--vscode-bg-primary: #1e1e1e;        /* 主背景 */
--vscode-bg-secondary: #252526;      /* 次背景 */
--vscode-bg-tertiary: #2d2d2d;       /* 第三层背景 */
--vscode-bg-hover: #2a2d2e;          /* 悬停背景 */
--vscode-bg-active: #37373d;         /* 激活背景 */

/* 边框颜色 */
--vscode-border: #3c3c3c;            /* 默认边框 */
--vscode-border-active: #007acc;     /* 激活边框 */

/* 文字颜色 */
--vscode-text-primary: #cccccc;      /* 主要文字 */
--vscode-text-secondary: #858585;    /* 次要文字 */
--vscode-text-tertiary: #6e6e6e;     /* 辅助文字 */
--vscode-text-link: #3794ff;         /* 链接文字 */

/* 强调色 */
--vscode-accent: #007acc;            /* 主题蓝 */
--vscode-accent-hover: #1c97ea;      /* 悬停蓝 */

/* 状态颜色 */
--vscode-error: #f14c4c;             /* 错误红 */
--vscode-warning: #cca700;           /* 警告黄 */
--vscode-success: #89d185;           /* 成功绿 */
--vscode-info: #3794ff;              /* 信息蓝 */
```

#### 4.1.3 字体规范
- **界面字体:** -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial
- **代码字体:** "Consolas", "Monaco", "Courier New", monospace
- **字号:**
  - 标题: 14px (medium)
  - 正文: 13px (regular)
  - 辅助: 11px (small)
  - 代码: 12px

### 4.2 响应式设计

#### 4.2.1 断点定义
- **桌面端:** ≥ 1024px（完整布局）
- **平板端:** 768px - 1023px（隐藏侧边栏，改为抽屉）
- **移动端:** < 768px（活动栏移到底部，单栏布局）

#### 4.2.2 移动端适配
- **底部导航栏:** 替代左侧活动栏
- **全屏抽屉:** 侧边栏内容
- **卡片式布局:** 帖子列表
- **简化操作:** 长按显示更多选项

### 4.3 交互设计

#### 4.3.1 活动栏交互
- **点击图标:** 切换侧边栏显示内容
- **悬停提示:** 显示功能名称
- **当前状态:** 高亮背景色

#### 4.3.2 侧边栏交互
- **折叠/展开:** 顶部箭头按钮
- **列表项悬停:** 背景色变化
- **列表项点击:** 跳转到对应页面
- **右键菜单:** 显示更多操作

#### 4.3.3 标签页交互
- **新开标签:** 点击帖子打开新标签
- **切换标签:** 点击标签切换内容
- **关闭标签:** 点击 × 按钮
- **拖拽排序:** 可拖拽调整顺序

#### 4.3.4 快捷键支持
- **全局快捷键:**
  - `Ctrl/Cmd + K`: 快速搜索
  - `Ctrl/Cmd + B`: 切换侧边栏
  - `Ctrl/Cmd + /`: 显示快捷键帮助
- **编辑器快捷键:**
  - `Ctrl/Cmd + S`: 保存
  - `Ctrl/Cmd + B`: 加粗
  - `Ctrl/Cmd + I`: 斜体

### 4.4 无障碍访问

#### 4.4.1 ARIA标准
- **语义化HTML:** 使用正确的HTML5标签
- **ARIA标签:**
  - `aria-label`: 按钮和图标说明
  - `aria-current`: 当前页面标识
  - `aria-expanded`: 展开/折叠状态
- **键盘导航:**
  - `Tab`: 焦点移动
  - `Enter/Space`: 激活元素
  - `Esc`: 关闭弹窗/抽屉

#### 4.4.2 对比度
- **文字对比度:** 至少4.5:1
- **大文字对比度:** 至少3:1
- **图标对比度:** 至少3:1

---

## 5. 非功能需求

### 5.1 性能要求

#### 5.1.1 响应时间
- **首屏加载:** < 2秒
- **页面切换:** < 500ms
- **API响应:** < 200ms（P95）
- **搜索查询:** < 1秒

#### 5.1.2 并发能力
- **支持并发用户:** 10,000+
- **数据库连接池:** 100个连接
- **Redis缓存:** 命中率 > 80%

#### 5.1.3 资源优化
- **图片压缩:** WebP格式，自动压缩
- **代码分割:** 按路由懒加载
- **CDN加速:** 静态资源CDN分发
- **缓存策略:**
  - 静态资源: 1年
  - API数据: 5分钟
  - 用户数据: 实时

### 5.2 安全要求

#### 5.2.1 认证安全
- **密码加密:** bcrypt，salt rounds = 10
- **Token过期:**
  - Access Token: 15分钟
  - Refresh Token: 7天
- **HTTPS强制:** 生产环境强制HTTPS
- **防暴力破解:**
  - 登录失败5次锁定10分钟
  - 验证码保护

#### 5.2.2 数据安全
- **SQL注入防护:** 使用Prisma ORM参数化查询
- **XSS防护:**
  - 用户输入过滤
  - CSP（Content Security Policy）
  - HttpOnly Cookie
- **CSRF防护:**
  - CSRF Token验证
  - SameSite Cookie属性

#### 5.2.3 敏感信息保护
- **邮箱脱敏:** a***@example.com
- **手机号脱敏:** 138****5678
- **IP地址记录:** 记录到活动日志
- **密码重置:** 一次性链接，30分钟有效

### 5.3 可扩展性

#### 5.3.1 水平扩展
- **应用服务:** 支持多实例部署
- **数据库:** 读写分离，主从复制
- **缓存:** Redis集群
- **文件存储:** 分布式文件系统或OSS

#### 5.3.2 模块化设计
- **前后端分离:** 独立部署
- **微服务架构:** 按业务模块拆分
- **插件系统:** 支持第三方扩展

### 5.4 可用性

#### 5.4.1 在线时间
- **目标:** 99.9%在线时间
- **故障恢复:**
  - 自动重启机制
  - 健康检查
  - 熔断降级

#### 5.4.2 数据备份
- **数据库备份:**
  - 每日全量备份
  - 每小时增量备份
  - 异地容灾
- **文件备份:**
  - 定期同步备份
  - 版本控制

---

## 6. 业务规则

### 6.1 打卡规则
- **每日一次限制:** 同一用户每天只能打卡一次
- **打卡时间:** 当天00:00:00 - 23:59:59（服务器时间）
- **补卡功能:** 不支持补卡，鼓励连续打卡
- **学习时长:** 单次打卡最多记录24小时

### 6.2 帖子规则

#### 6.2.1 发布权限
- **创始人:** 可发布到任意板块
- **管理员:** 可发布到任意板块
- **用户:** 可发布到任意板块
- **所有角色:** 都可以创建草稿

#### 6.2.2 删除权限
- **创始人:** 可删除任意帖子
- **管理员:** 可删除普通用户的帖子
- **用户:** 只能删除自己的帖子
- **删除限制:**
  - 有评论的帖子需确认删除
  - 删除后不可恢复（软删除除外）

#### 6.2.3 编辑权限
- **创始人/管理员:** 可编辑任意帖子
- **用户:** 只能编辑自己的帖子
- **编辑限制:**
  - 已锁定帖子不可编辑
  - 编辑历史记录（可选）

### 6.3 评论规则

#### 6.3.1 嵌套层级
- **最大层级:** 3层
- **示例:**
  ```
  评论1 (层级1)
    └─ 回复1-1 (层级2)
        └─ 回复1-1-1 (层级3)  <- 最多到这
  ```

#### 6.3.2 评论限制
- **创始人/管理员:** 可删除任意评论
- **用户:** 只能删除自己的评论
- **评论内容:**
  - 支持Markdown
  - 最多1000字
  - 不支持代码块（避免混乱）

### 6.4 管理员规则

#### 6.4.1 权限限制
- **不能修改系统设置:** 如权限配置、功能开关
- **不能管理其他管理员:** 无法任命或撤销管理员
- **不能删除创始人账户:** 创始人账户受保护

#### 6.4.2 操作审计
- **所有管理操作记录到活动日志**
- **日志内容包括:**
  - 操作人
  - 操作时间
  - 操作类型
  - 操作对象
  - IP地址

### 6.5 内容规范

#### 6.5.1 违规内容
- **政治敏感内容**
- **色情暴力内容**
- **广告垃圾信息**
- **人身攻击**
- **侵犯版权**

#### 6.5.2 处理流程
1. 用户举报
2. 管理员审核
3. 确认违规 → 删除内容 + 警告
4. 三次违规 → 封禁账户
5. 严重违规 → 直接封禁

---

## 7. 数据统计需求

### 7.1 用户统计
- **总用户数**
- **活跃用户数（日活/周活/月活）**
- **新增用户数（按日/周/月）**
- **用户留存率**

### 7.2 内容统计
- **帖子总数**
- **评论总数**
- **打卡总数**
- **各板块内容分布**

### 7.3 活跃度统计
- **发帖排行榜**
- **评论排行榜**
- **打卡排行榜**
- **点赞排行榜**

### 7.4 系统统计
- **API调用量**
- **响应时间**
- **错误率**
- **服务器资源使用率**

---

## 8. 未来规划

### 8.1 短期计划（3-6个月）
- [ ] 完成核心功能开发
- [ ] 上线内测版本
- [ ] 收集用户反馈
- [ ] 优化性能和体验

### 8.2 中期计划（6-12个月）
- [ ] 增加私信功能
- [ ] 实现关注系统
- [ ] 添加用户成就徽章
- [ ] 开发移动端App

### 8.3 长期计划（12个月以上）
- [ ] 学习小组功能
- [ ] 在线代码运行器
- [ ] 技术问答板块
- [ ] 招聘信息发布
- [ ] 技术专栏订阅
- [ ] 开放API平台

---

## 9. 风险评估

### 9.1 技术风险
- **并发性能:** 需要压力测试和优化
- **数据安全:** 需要严格的安全措施
- **系统稳定性:** 需要完善的监控和告警

### 9.2 运营风险
- **内容审核:** 需要建立审核机制
- **用户增长:** 需要推广策略
- **社区氛围:** 需要引导和维护

### 9.3 法律风险
- **内容合规:** 需要审核机制
- **用户隐私:** 需要隐私政策和用户协议
- **知识产权:** 需要版权声明

---

## 10. 成功指标

### 10.1 用户指标
- **注册用户数:** 1000+（6个月）
- **月活跃用户:** 500+（6个月）
- **用户留存率:** 30%+（30天）

### 10.2 内容指标
- **日均帖子数:** 20+（6个月）
- **日均打卡数:** 50+（6个月）
- **内容质量:** 平均点赞数 5+

### 10.3 技术指标
- **系统可用性:** 99.9%
- **响应时间:** P95 < 200ms
- **错误率:** < 0.1%

---

## 11. 版本历史

| 版本 | 日期 | 修改内容 | 修改人 |
|------|------|----------|--------|
| v1.0 | 2026-01-23 | 初始版本，完成核心需求定义 | - |

---

## 附录：参考资料

- [VSCode官方文档](https://code.visualstudio.com/docs)
- [Prisma文档](https://www.prisma.io/docs)
- [Next.js文档](https://nextjs.org/docs)
- [NestJS文档](https://docs.nestjs.com/)
